(()=>{"use strict";const e={myLibrary:JSON.parse(localStorage.getItem("myLibrary"))||[],addBook:(t,r,a,l,o)=>{let n=new class{constructor(e,t,r,a,l){this.bookID=e,this.title=t,this.author=r,this.pages=a,this.status=l}}(t,r,a,l,o);e.myLibrary.push(n),localStorage.setItem("myLibrary",JSON.stringify(e.myLibrary))},deleteBook:t=>{let r=t.target.parentNode.parentNode.firstChild.innerText;e.myLibrary.forEach((t=>{if(t.title===r){let r=e.myLibrary.indexOf(t);e.myLibrary.splice(r,1),localStorage.setItem("myLibrary",JSON.stringify(e.myLibrary))}else alert("An error has occurred")}))},changeStatus:t=>{let r=t.target,a=parseInt(r.id),l=e.myLibrary[a];"Unread"===l.status?l.status="Read":l.status="Unread",localStorage.setItem("myLibrary",JSON.stringify(e.myLibrary))}},t=e,r={a:0,tbody:document.querySelector("tbody"),submitButton:document.querySelector("#submit"),title:document.querySelector("#title"),author:document.querySelector("#author"),pages:document.querySelector("#pages"),status:document.querySelector("#status"),create_tr:()=>document.createElement("tr"),create_td:()=>document.createElement("td"),create_deleteButton:()=>{let e=r.create_td(),t=document.createElement("button");return t.setAttribute("id",r.a),t.classList.add("deleteBtn"),t.innerText="Delete",e.appendChild(t),e},create_statusButton:e=>{let t=r.create_td(),a=document.createElement("button");return a.classList.add("statusBtn"),a.setAttribute("id",r.a),a.innerText=e,t.appendChild(a),t},renderBook:(e,t,a,l,o)=>{let n=[r.a,t,a,l,o],i=r.create_tr();i.setAttribute("id",r.a);for(let e=1;e<n.length;e++){let t=n[e];if(4===e){let e=r.create_statusButton(o);i.appendChild(e)}else{let e=r.create_td();e.innerText=t,i.appendChild(e)}}let s=r.create_deleteButton();i.appendChild(s),r.tbody.appendChild(i),r.a++},removeBook:e=>{e.target.parentNode.parentNode.remove()}},a=r;a.title,a.author,a.pages;t.myLibrary.forEach((function(e){let r=Array.from(Object.keys(e)),l=a.create_tr();for(let o=1;o<r.length;o++){let n=e[r[o]];if(4===o){let e=a.create_statusButton(n);e.addEventListener("click",t.changeStatus),l.appendChild(e)}else{let e=a.create_td();e.innerText=n,l.appendChild(e)}}let o=a.create_deleteButton();l.setAttribute("id",e.bookID),l.appendChild(o),a.tbody.appendChild(l),a.a++})),document.querySelectorAll(".deleteBtn").forEach((e=>{e.addEventListener("click",t.deleteBook),e.addEventListener("click",a.removeBook)})),a.submitButton.addEventListener("click",(()=>{!0===((e,t)=>{if(isNaN(parseInt(e)))return!0;for(let e=0;e<t.length;e++)for(let r=e+1;r<t.length;r++)if(t[e].title===t[r].title)return!0})(a.pages.value,t.myLibrary)?console.log("an error has occurred"):(a.renderBook(a.a,a.title.value,a.author.value,parseInt(a.pages.value),a.status.value),t.addBook(a.a,a.title.value,a.author.value,parseInt(a.pages.value),a.status.value))}))})();