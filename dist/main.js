(()=>{"use strict";const e={myLibrary:JSON.parse(localStorage.getItem("myLibrary"))||[],addBook:(t,r,a,o,l)=>{let n=new class{constructor(e,t,r,a,o){this.bookID=e,this.title=t,this.author=r,this.pages=a,this.status=o}}(t,r,a,o,l);e.myLibrary.push(n),localStorage.setItem("myLibrary",JSON.stringify(e.myLibrary))},deleteBook:t=>{let r=t.target,a=e.myLibrary.find((({bookID:e})=>e===parseInt(r.id))),o=e.myLibrary.indexOf(a);-1!==o&&e.myLibrary.splice(o,1),localStorage.setItem("myLibrary",JSON.stringify(e.myLibrary))},changeStatus:t=>{let r=t.target,a=parseInt(r.id),o=e.myLibrary[a];"Unread"===o.status?o.status="Read":o.status="Unread",localStorage.setItem("myLibrary",JSON.stringify(e.myLibrary))}},t=e,r={a:0,tbody:document.querySelector("tbody"),submitButton:document.querySelector("#submit"),title:document.querySelector("#title"),author:document.querySelector("#author"),pages:document.querySelector("#pages"),status:document.querySelector("#status"),create_tr:()=>document.createElement("tr"),create_td:()=>document.createElement("td"),create_deleteButton:()=>{let e=r.create_td(),t=document.createElement("button");return t.setAttribute("id",r.a),t.classList.add("deleteBtn"),t.innerText="Delete",e.appendChild(t),e},create_statusButton:e=>{let t=r.create_td(),a=document.createElement("button");return a.classList.add("statusBtn"),a.setAttribute("id",r.a),a.innerText=e,t.appendChild(a),t},renderBook:(e,t,a,o,l)=>{let n=[r.a,t,a,o,l],s=r.create_tr();s.setAttribute("id",r.a);for(let e=1;e<n.length;e++){let t=n[e];if(4===e){let e=r.create_statusButton(l);s.appendChild(e)}else{let e=r.create_td();e.innerText=t,s.appendChild(e)}}let d=r.create_deleteButton();s.appendChild(d),r.tbody.appendChild(s)},removeBook:e=>{e.target.parentNode.parentNode.remove()}},a=r;a.title,a.author;const o=()=>{if(isNaN(parseInt(a.pages.value)))return!0};t.myLibrary.forEach((function(e){let r=Array.from(Object.keys(e)),o=a.create_tr();for(let l=1;l<r.length;l++){let n=e[r[l]];if(4===l){let e=a.create_statusButton(n);e.addEventListener("click",t.changeStatus),o.appendChild(e)}else{let e=a.create_td();e.innerText=n,o.appendChild(e)}}let l=a.create_deleteButton();o.setAttribute("id",e.bookID),o.appendChild(l),a.tbody.appendChild(o),a.a++})),document.querySelectorAll(".deleteBtn").forEach((e=>{e.addEventListener("click",t.deleteBook),e.addEventListener("click",a.removeBook)})),a.submitButton.addEventListener("click",(()=>{!0===o?console.log("an error has occurred"):(a.renderBook(a.a,a.title.value,a.author.value,parseInt(a.pages.value),a.status.value),t.addBook(a.a,a.title.value,a.author.value,parseInt(a.pages.value),a.status.value))}))})();